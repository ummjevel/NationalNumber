<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<!-- <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.7.2/proj4.js'></script> -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script type="text/javascript" src="https://code.jquery.com/jquery-latest.js"></script>	
		<script type="text/javascript" src="https://sgisapi.kostat.go.kr/OpenAPI3/auth/javascriptAuth?consumer_key=ea852adca0c8454dae6b"></script>
		<script>
			// key and values for converting utmk to national number.
			var nn_est = { 7: "가", 8: "나", 9: "다", 10: "라", 11: "마", 12: "바", 13: "사" };
			var nn_nor = { 13: "가", 14: "나", 15: "다", 16: "라", 17: "마", 18: "바", 19: "사", 20: "아" };
			
			window.onload = function() {
				document.getElementById("btn_convert").onclick = function() {
					alert('you clicked!');
				}
				
				// init map
				var map = sop.map("map");
				var utmkXY = new sop.LatLng (36.3504119,127.3845475); 
				map.setView(sop.utmk(utmkXY.x, utmkXY.y), 9); 
				// draw map
				var html = "<p>wgs84 :  36.3504119,127.3845475</p>";
				html += "<p>x = "+utmkXY.x+" , y = "+utmkXY.x+"</p>";
				$("#divCon").append(html);
				console.log(html);
				
				

			};	
			$(function() {
				// 
			});
			
			// converter latitude, longitude to National Number
			function Wgs842NN(latitude, longitude) {
				// convert wgs84(lat, log) -> utm-k -> National Number
				var utmkXY = new sop.LatLng(latitude, longitude);
				if (utmkXY.x != undefined && utmkXY.y != undefined) {
					var key_est = parseInt(utmkXY.x/100000);
					var key_nor = parseInt(utmkXY.y/100000);
					if (key_est in nn_est && key_nor in nn_nor) {
						var rest_est = (utmkXY.x + "").slice((key_est + "").length).slice(0, 4);
						var rest_nor = (utmkXY.y + "").slice((key_nor + "").length).slice(0, 4);
						return nn_est[key_est] + nn_nor[key_nor] + " " + rest_est + " " + rest_nor;
					}
				}
				return "0";
				
			}
			
			function test() {
				try {
					webkit.messageHandlers.test.postMessage("test completed");
				} catch(err) {
					alert(err);
				}
			}
			
			

		</script>
		<title>National Number API</title>
	</head>
	<body>
		<h3>환영합니다.</h3>
		경도<input type='text' id='input_longitude'/>
		위도<input type='text' id='input_latitude'/>
		<input type='button' value='convert' id='btn_convert'/>
<div id="map" class="" style="width:90%-20px;height:580px;z-index:1200"></div>
 <div id="divCon"></div>
	</body>
</html>
